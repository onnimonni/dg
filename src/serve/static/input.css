@import "tailwindcss";
@source not "./daisyui{,*}.mjs";
@plugin "./daisyui.mjs";

/* Custom dark theme matching piper colors */
@plugin "./daisyui-theme.mjs" {
  name: "piper";
  default: true;
  prefersdark: true;
  color-scheme: dark;

  /* Base colors - dark background */
  --color-base-100: #1a202c;
  --color-base-200: #151b27;
  --color-base-300: #101524;
  --color-base-content: #e2e8f0;

  /* Primary - piper green accent */
  --color-primary: #007c43;
  --color-primary-content: #ffffff;

  /* Secondary - lighter green */
  --color-secondary: #00a55a;
  --color-secondary-content: #ffffff;

  /* Accent - for highlights */
  --color-accent: #00a55a;
  --color-accent-content: #ffffff;

  /* Neutral - for subtle elements */
  --color-neutral: #334155;
  --color-neutral-content: #94a3b8;

  /* Status colors */
  --color-info: #3b82f6;
  --color-info-content: #ffffff;
  --color-success: #22c55e;
  --color-success-content: #ffffff;
  --color-warning: #eab308;
  --color-warning-content: #000000;
  --color-error: #ef4444;
  --color-error-content: #ffffff;

  /* Border radius */
  --radius-selector: 0.5rem;
  --radius-field: 0.5rem;
  --radius-box: 0.75rem;

  /* Base sizes */
  --size-selector: 0.25rem;
  --size-field: 0.25rem;

  /* Border */
  --border: 1px;

  /* Effects */
  --depth: 1;
  --noise: 0;
}

/* Web fonts from Nix packages */
@font-face {
    font-family: 'Inter';
    font-weight: 100 900;
    font-display: swap;
    src: url('/static/fonts/InterVariable.ttf') format('truetype');
}

@font-face {
    font-family: 'JetBrains Mono';
    font-weight: 400;
    font-display: swap;
    src: url('/static/fonts/JetBrainsMono-Regular.woff2') format('woff2');
}

/* Custom scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #101524; }
::-webkit-scrollbar-thumb { background: #2d3748; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #4a5568; }

/* Content markdown styles */
/* Hide duplicate H1 title (already shown in header) */
.content h1:first-child { display: none; }
/* Heading link indicator on hover */
.content h2:hover::after, .content h3:hover::after {
    content: " #";
    color: #64748b;
    font-weight: normal;
}
.content h1 { font-size: 1.5rem; font-weight: 700; margin-top: 2.5rem; margin-bottom: 0.5rem; color: #e2e8f0; }
/* Vertical rhythm: more space above headers to group with content below */
.content h2 { font-size: 1.25rem; font-weight: 600; margin-top: 2.5rem; margin-bottom: 0.5rem; color: #e2e8f0; }
.content h3 { font-size: 1.1rem; font-weight: 600; margin-top: 2rem; margin-bottom: 0.375rem; color: #e2e8f0; }
.content h2:first-child, .content h1:first-child + h2 { margin-top: 0; }
.content p { margin-bottom: 1rem; }
.content ul, .content ol { margin-left: 1.5rem; margin-bottom: 1rem; }
.content li { margin-bottom: 0.35rem; }
/* Task list styling - remove bullet points when checkbox present */
.content li:has(> input[type="checkbox"]) { list-style: none; margin-left: -1.25rem; }
.content li > input[type="checkbox"] {
    appearance: none;
    width: 1rem;
    height: 1rem;
    border: 1.5px solid #64748b;
    border-radius: 3px;
    margin-right: 0.5rem;
    vertical-align: middle;
    cursor: pointer;
    position: relative;
    top: -1px;
}
.content li > input[type="checkbox"]:checked {
    background: #007c43;
    border-color: #007c43;
}
.content li > input[type="checkbox"]:checked::after {
    content: "✓";
    color: white;
    font-size: 0.7rem;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.content strong { font-weight: bold; }
.content em { font-style: italic; }
.content code { background: #1e293b; padding: 0.2rem 0.4rem; border-radius: 3px; font-family: 'JetBrains Mono', monospace; font-size: 0.9em; }
.content pre { background: #1e293b; padding: 1rem; border-radius: 8px; overflow-x: auto; margin-bottom: 1rem; max-width: 100%; }
.content pre code { background: none; padding: 0; font-size: 0.875rem; }

/* Syntax highlighting overrides for dark theme */
.content pre code.hljs { background: transparent; padding: 0; }
.hljs { background: #1e293b; }
.hljs-comment, .hljs-quote { color: #6b7280; }
.hljs-keyword, .hljs-selector-tag { color: #c792ea; }
.hljs-string, .hljs-attr { color: #c3e88d; }
.hljs-number, .hljs-literal { color: #f78c6c; }
.hljs-variable, .hljs-template-variable { color: #82aaff; }
.hljs-function, .hljs-title { color: #82aaff; }
.hljs-built_in, .hljs-type { color: #ffcb6b; }
.hljs-params { color: #e2e8f0; }
.hljs-symbol, .hljs-bullet { color: #89ddff; }
.content blockquote { border-left: 3px solid #007c43; padding-left: 1rem; margin: 1rem 0; color: #94a3b8; }
.content table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; }
.content th, .content td { padding: 0.5rem; border: 1px solid #334155; text-align: left; }
.content th { background: #1e293b; }

/* Record link styling */
.record-link {
    display: inline;
    padding: 0.1rem 0.35rem;
    background: rgba(148, 163, 184, 0.15);
    border-radius: 3px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85em;
    color: #94a3b8;
    text-decoration: none;
    cursor: pointer;
    position: relative;
    vertical-align: baseline;
}
.record-link:hover { background: rgba(148, 163, 184, 0.25); text-decoration: underline; color: #e2e8f0; }

.record-preview {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #1a202c;
    border: 1px solid #334155;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    min-width: 280px;
    max-width: 350px;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s;
    margin-bottom: 8px;
    text-align: left;
}
.record-link:hover .record-preview { opacity: 1; }
.record-preview::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 8px solid transparent;
    border-top-color: #334155;
}
.preview-title { font-weight: bold; margin-bottom: 0.25rem; color: #e2e8f0; }
.preview-meta { font-size: 0.8rem; color: #94a3b8; }
.preview-status { display: inline-block; padding: 0.1rem 0.3rem; border-radius: 3px; font-size: 0.75rem; margin-left: 0.5rem; }
.preview-status.accepted { background: #4CAF50; }
.preview-status.proposed { background: #FF9800; color: #000; }
.preview-status.resolved { background: #3498db; }

/* Pros/Cons list styling */
.pros-list, .cons-list { list-style: none !important; padding-left: 1.5rem !important; }
.pros-list li::before {
    content: "+";
    color: #22c55e;
    font-weight: bold;
    margin-left: -1rem;
    margin-right: 0.5rem;
}
.cons-list li::before {
    content: "−";
    color: #ef4444;
    font-weight: bold;
    margin-left: -1rem;
    margin-right: 0.5rem;
}

/* TOC styling */
#toc-list, #toc-list ul { list-style: none; padding-left: 0; margin-left: 0; }
